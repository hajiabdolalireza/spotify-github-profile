<svg xmlns="http://www.w3.org/2000/svg" width="{{ width }}" height="{{ height }}">
  <style>
    .text { font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif; font-size:14px; fill:#e6edf3; }
    .meta { font-size:12px; fill:#8b949e; }
    svg { background:#0d1117; }
  </style>
  {% if items %}
    {% for item in items %}
      <g transform="translate({{ pad }}, {{ pad + loop.index0 * row_h }})">
        {% set track = item.track %}
        {% set artist = track.artists[0].name if track.artists else '' %}
        {% set img_url = track.album.images[0].url if track.album.images else '' %}
        <image href="{{ img_url }}" width="{{ img }}" height="{{ img }}" />
        <text x="{{ img + 8 }}" y="16" class="text">{{ track.name }} - {{ artist }}</text>
        {% if item.played_at %}
        <text x="{{ img + 8 }}" y="32" class="meta">{{ item.played_at }}</text>
        {% endif %}
      </g>
    {% endfor %}
  {% else %}
    <text x="{{ pad }}" y="40" class="text">No recent tracks</text>
  {% endif %}
</svg>
